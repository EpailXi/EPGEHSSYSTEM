<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EPG EHS System</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#f4f4f4; }
    header {
      background:#004d99; color:#fff;
      padding: 4px 12px;
      text-align:center;
    }
    .logo { font-size:18px; margin-right:6px; }
    .title { font-size:16px; font-weight:bold; letter-spacing:0.5px; }
    nav {
      display:flex;
      background:#e6e6e6;
      border-bottom:1px solid #ccc;
    }
    nav button {
      flex:1;
      padding:12px;
      border:none;
      background:inherit;
      font-size:16px;
      cursor:pointer;
      transition:background 0.3s;
    }
    nav button:hover, nav button.active {
      background:#d0e0ff;
    }
    .tab-content, .subtab-content {
      display: none;
    }
    .tab-content.active, .subtab-content.active {
      display: block;
    }
    iframe {
      width: 100%;
      height: calc(100vh - 150px);
      border: none;
    }
    .audio-buttons {
      display:flex;
      gap:20px;
      justify-content:center;
      padding:20px;
      flex-wrap:wrap;
    }
    .audio-section {
      display: none;
      text-align: center;
    }
    .audio-section.active {
      display: block;
    }
    .subtabs {
      display: flex;
      justify-content: center;
      background: #f0f0f0;
      border-bottom: 1px solid #ccc;
    }
    .subtabs button {
      padding: 10px 20px;
      border: none;
      background: inherit;
      cursor: pointer;
      font-size: 15px;
    }
    .subtabs button:hover, .subtabs button.active {
      background: #d0e0ff;
    }
    .loader {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      font-size: 16px;
      color: #333;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #ccc;
      border-top: 4px solid #004d99;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 10px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

<header>
  <h1><span class="logo">üõ°Ô∏è</span><span class="title">EPG EHS System</span></h1>
</header>

<nav>
  <button id="tab-induction" class="active" data-tab="induction">Induction</button>
  <button id="tab-voiceover" data-tab="voiceover">Induction Voice Over</button>
  <button id="tab-ppeInventory" data-tab="ppeInventory">PPE Inventory</button>
  <button id="tab-ppeForm" data-tab="ppeForm">PPE Issue & Return</button>
</nav>

<main>
  <!-- Induction -->
  <div id="content-induction" class="tab-content active" data-url="https://epailxi.github.io/EPGNTPINDUCTION/"></div>

  <!-- Voice Over -->
  <div id="content-voiceover" class="tab-content">
    <div class="audio-buttons">
      <button data-lang="chinese">‚ñ∂ Chinese Voice Over</button>
      <button data-lang="vietnamese">‚ñ∂ Vietnamese Voice Over</button>
    </div>
    <div id="chinese" class="audio-section">
      <audio preload="none" controls>
        <source src="Chinese voice over induction H .mp3" type="audio/mpeg">
      </audio>
    </div>
    <div id="vietnamese" class="audio-section">
      <audio preload="none" controls>
        <source src="Vietnam voice over induction H .mp3" type="audio/mpeg">
      </audio>
    </div>
  </div>

  <!-- PPE Inventory -->
  <div id="content-ppeInventory" class="tab-content" data-url="https://twswzvv3ark.sg.feishu.cn/file/EJDJbsCNZoMoRIx2wujlpazVgDh"></div>

  <!-- PPE Form -->
  <div id="content-ppeForm" class="tab-content">
    <div class="subtabs">
      <button id="subtab-issue" class="active" data-subtab="issue">Issue & Return</button>
      <button id="subtab-search" data-subtab="search">Search</button>
    </div>
    <div id="subcontent-issue" class="subtab-content active" data-url="https://twswzvv3ark.sg.feishu.cn/share/base/form/shrlgLgnuhFnHx9HmffMoKyrfjf"></div>
    <div id="subcontent-search" class="subtab-content" data-url="https://twswzvv3ark.sg.feishu.cn/share/base/query/shrlgX74PkvggRvBLlfoFwKzXtZ"></div>
  </div>
</main>

<script>
  const tabs = document.querySelectorAll("nav button");
  const contents = document.querySelectorAll(".tab-content");

  tabs.forEach(btn => {
    btn.addEventListener("click", () => {
      tabs.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const tabName = btn.dataset.tab;

      contents.forEach(div => {
        if (div.id === `content-${tabName}`) {
          div.classList.add("active");
          loadIframeIfNeeded(div);
        } else {
          div.classList.remove("active");
        }
      });

      document.querySelectorAll(".audio-section").forEach(el => el.classList.remove("active"));
    });
  });

  document.querySelectorAll(".audio-buttons button").forEach(btn => {
    btn.addEventListener("click", () => {
      const lang = btn.dataset.lang;
      document.querySelectorAll(".audio-section").forEach(section => section.classList.remove("active"));
      document.getElementById(lang).classList.add("active");
    });
  });

  const subtabButtons = document.querySelectorAll(".subtabs button");
  const subcontents = document.querySelectorAll(".subtab-content");

  subtabButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      subtabButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const sub = btn.dataset.subtab;

      subcontents.forEach(div => {
        if (div.id === `subcontent-${sub}`) {
          div.classList.add("active");
          loadIframeIfNeeded(div);
        } else {
          div.classList.remove("active");
        }
      });
    });
  });

  function loadIframeIfNeeded(container) {
    if (container.dataset.loaded || !container.dataset.url) return;

    const loader = document.createElement("div");
    loader.className = "loader";
    loader.innerHTML = `<div class="spinner"></div><div>Please wait ~5 seconds...</div>`;
    container.appendChild(loader);

    const iframe = document.createElement("iframe");
    iframe.src = container.dataset.url;
    iframe.loading = "lazy";
    iframe.onload = () => loader.remove();

    container.appendChild(iframe);
    container.dataset.loaded = "true";
  }
</script>

</body>
</html>
