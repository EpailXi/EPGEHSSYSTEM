<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EPG EHS System</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
    }

    header {
      background-color: #004080;
      color: white;
      padding: 10px 20px;
      display: flex;
      align-items: center;
    }

    header img {
      height: 40px;
      margin-right: 15px;
    }

    header h1 {
      font-size: 1.5rem;
      margin: 0;
    }

    .tabs {
      display: flex;
      flex-wrap: wrap;
      background-color: #ddd;
      padding: 10px;
    }

    .tabs button {
      background: #fff;
      border: 1px solid #ccc;
      margin: 2px;
      padding: 8px 16px;
      cursor: pointer;
      transition: background 0.3s;
      border-radius: 4px;
      font-weight: bold;
    }

    .tabs button.active {
      background: #004080;
      color: #fff;
    }

    .subtabs {
      display: flex;
      margin-top: 10px;
      padding-left: 10px;
    }

    .subtabs button {
      background: #eee;
      border: 1px solid #ccc;
      margin: 2px;
      padding: 6px 12px;
      cursor: pointer;
      border-radius: 4px;
    }

    .subtabs button.active {
      background: #004080;
      color: #fff;
    }

    .content {
      padding: 10px;
    }

    iframe {
      width: 100%;
      height: 500px;
      border: none;
    }

    .loader {
      display: none;
      text-align: center;
      margin: 20px;
    }

    .audio-section {
      display: none;
    }

    .audio-section.active {
      display: block;
    }

    .voice-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px 0;
    }

    .voice-buttons button {
      padding: 6px 12px;
      border: 1px solid #888;
      border-radius: 4px;
      cursor: pointer;
      background: #f5f5f5;
    }

    .voice-buttons button.active {
      background: #004080;
      color: white;
    }

    /* Compact audio controls spacing */
    .audio-section audio {
      display: block;
      margin-bottom: 8px;
      height: 32px;
    }
  </style>
</head>

<body>
  <header>
    <img src="https://epailxi.github.io/EPGEHSSYSTEM/EPGLogo.png" alt="EPG Logo">
    <h1>EPG EHS System</h1>
  </header>

  <div class="tabs" role="tablist">
    <button onclick="activateTab('induction')" type="button">Induction</button>
    <button onclick="activateTab('cidb')" type="button">CIDB</button>
    <button onclick="activateTab('immigration')" type="button">Immigration</button>
    <button onclick="activateTab('voiceover')" type="button">Voiceover</button>
    <button onclick="activateTab('ppe')" type="button">PPE Inventory</button>
    <button onclick="activateTab('ppeform')" type="button">PPE Form</button>
  </div>

  <div class="subtabs" id="ppeSubtabs">
    <button onclick="activateSubtab('issue')" type="button">Issue & Return</button>
    <button onclick="activateSubtab('search')" type="button">Search</button>
  </div>

  <div class="voice-buttons" id="voiceButtons">
    <button onclick="showAudio('chinese')" type="button">Chinese</button>
    <button onclick="showAudio('vietnam')" type="button">Vietnamese</button>
    <button onclick="showAudio('bangla')" type="button">Bangla</button>
  </div>

  <div class="content">
    <div class="loader" id="loader">Loading...</div>
    <iframe id="mainFrame" loading="lazy"></iframe>

    <!-- Voiceover: Controls on top -->
    <div class="audio-section" id="chinese">
      <audio controls>
        <source src="ChineseH.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <p>这里是中文语音的内容...</p>
    </div>

    <div class="audio-section" id="vietnam">
      <audio controls>
        <source src="VietnamH.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <p>Đây là nội dung tiếng Việt...</p>
    </div>

    <div class="audio-section" id="bangla">
      <audio controls>
        <source src="BanglaH.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <p>এটি বাংলা ভাষার বিষয়বস্তু...</p>
    </div>
  </div>

  <script>
    function activateTab(tab) {
      document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.tabs button[onclick*="${tab}"]`).classList.add('active');

      document.getElementById('ppeSubtabs').style.display = tab === 'ppeform' ? 'flex' : 'none';
      document.getElementById('voiceButtons').style.display = tab === 'voiceover' ? 'flex' : 'none';

      // Stop all audio
      document.querySelectorAll('audio').forEach(a => a.pause());
      document.querySelectorAll('.audio-section').forEach(s => s.classList.remove('active'));

      const iframe = document.getElementById('mainFrame');
      const loader = document.getElementById('loader');
      loader.style.display = 'block';
      iframe.style.display = 'none';

      let src = '';
      switch (tab) {
        case 'induction': src = 'https://epailxi.github.io/EPGNTPINDUCTION'; break;
        case 'cidb': src = 'https://epailxi.github.io/CIDBSlipDownload'; break;
        case 'immigration': src = 'https://eservices.imi.gov.my/myimms/FomemaStatus'; break;
        case 'ppe': src = 'https://twswzvv3ark.sg.feishu.cn/file/EJDJbsCNZoMoRIx2wujlpazVgDh'; break;
        case 'ppeform':
          activateSubtab('issue');
          return;
        case 'voiceover':
          iframe.src = '';
          loader.style.display = 'none';
          return;
      }
      iframe.src = src;
      iframe.onload = () => loader.style.display = 'none';
      iframe.style.display = 'block';
      localStorage.setItem('selectedTab', tab);
    }

    function activateSubtab(subtab) {
      document.querySelectorAll('#ppeSubtabs button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`#ppeSubtabs button[onclick*="${subtab}"]`).classList.add('active');
      const iframe = document.getElementById('mainFrame');
      const loader = document.getElementById('loader');
      loader.style.display = 'block';
      iframe.style.display = 'none';

      if (subtab === 'issue') {
        iframe.src = 'https://twswzvv3ark.sg.feishu.cn/share/base/form/shrlgLgnuhFnHx9HmffMoKyrfjf';
      } else if (subtab === 'search') {
        iframe.src = 'https://twswzvv3ark.sg.feishu.cn/share/base/query/shrlgX74PkvggRvBLlfoFwKzXtZ';
      }

      iframe.onload = () => loader.style.display = 'none';
      iframe.style.display = 'block';
    }

    function showAudio(lang) {
      document.querySelectorAll('.voice-buttons button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.voice-buttons button[onclick*="${lang}"]`).classList.add('active');
      document.querySelectorAll('.audio-section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(lang).classList.add('active');
    }

    // Restore last selected tab on load
    const savedTab = localStorage.getItem('selectedTab') || 'induction';
    activateTab(savedTab);
  </script>
</body>

</html>
